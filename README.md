# vktest2

Реализация простейшего API на php с графической [демонстрацией](https://cdynot.ru/vktest2/demo.php). 

В качестве хранилища используется MySQL, работа с базой идет через PDO.


API позволяет добавлять записи и получать агрегированную информацию о событиях (название события и счетчик этого события) из связных таблиц. Ответ возвращается в формате JSON.

В API представлены методы:

- **get (получение агрегированной информации по переданным параметрам: event (обязательно) или "event[]", "date", "ip", "auth")**
- **create (добавление новой записи, параметры запроса: "event" (обязательно), "ip" (для демонстрации), "auth")**
- **getAll (вспомогательный метод, для демонстрации - просмотр всех записей в таблице "event")**

В демонстрации графический интерфейс представлен двумя формами (форма добавления и форма получения) и блоком с ответом сервера. Так же, отображается название последнего выполненного запроса. Запрос отправляются асинхронно через javascript, ответ выводится в блок с результатом. 

**При добавлении** записи передается название события (обязательный параметр) и два необязательных параметра - ip адрес пользователя и авторизован ли пользователь.

**При получении** данных можно передать одно или несколько событий (обязательный параметр) и необязательные параметры - дата события (в формате Y-m-d), ip адрес пользователя, авторизован ли пользователь для фильтрации результата.

После добавления новой записи, тут же можно проверить её наличие в бд через кнопку "Посмотреть все записи".

Запрос посылается по адресу **"/api/имя_метода"**, параметры можно передавать как GET, так и POST методом, ответ возвращается в формате JSON.

---

**К проекту приложен дамп базы данных dump.sql**

Таблица **"events_name"** содержит список имен событий и их идентификаторы.

В таблицу **"event"** происходит добавление новых записей, содержит список всех событий, по которым идет выборка.

Структура таблицы **"events_name": "id" (primary key), "name"**.

Структура таблицы **"event": "id" (primary key), "name_id" (foreign key), "auth", "ip", "date"**.

---

При реализации демо активно использовались HTML, CSS, JS.

### Ссылка на [демо](https://cdynot.ru/vktest2/demo.php)
